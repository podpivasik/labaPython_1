from random import *

matrix_A = []
matrix_B = []
sum_op = 0

# –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–∑–º–µ—Ä—ã –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã—Ö –º–∞—Ç—Ä–∏—Ü ùê¥ –∏ ùêµ, –∞ —Ç–∞–∫–∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä k
a1, a2 = list(map(int, input("–í–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã A (m x n):\n ").split()))
b1, b2 = list(map(int, input("–í–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã B (n x p):\n ").split()))

k = int(input("–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ k:\n "))

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∫–æ–ª-–≤–æ —Å—Ç–æ–ª–±–æ–≤ –≤ –ø–µ—Ä–≤–æ–π –º–∞—Ç—Ä–∏—Ü—É —Ä–∞–≤–Ω–æ –∫–æ–ª-–≤—É —Å—Ç—Ä–æ–∫ –≤—Ç–æ—Ä–æ–π –º–∞—Ç—Ä–∏—Ü—ã
if a2 != b1:
    print("–ú–∞—Ç—Ä–∏—Ü—ã —Ç–∞–∫–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–º–Ω–æ–∂–∏—Ç—å")
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è, —á—Ç–æ m*n –Ω–µ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç 30*30
if a1 * a2 > 900:
    print("–ú–∞—Ç—Ä–∏—Ü–∞ –ê –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä")
# –üp–æ–≤–µ—Ä–∫–∞ —Éc–ª–æ–≤–∏—è, —á—Ç–æ n*p –Ω–µ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç 30*30
elif b1 * b2 > 900:
    print("–ú–∞—Ç—Ä–∏—Ü–∞ –í –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä")

else:
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã –ê
    for i in range(a1):
        a = []
        matrix_A.append(a)
        for j in range(a2):
            a.append(randint(-9, 9))
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã –í
    for i in range(b1):
        b = []
        matrix_B.append(b)
        for j in range(b2):
            b.append(randint(-9, 9))

    # –í—ã–≤–æ–¥ –º–∞—Ç—Ä–∏—Ü—ã –ê
    print('–ú–∞—Ç—Ä–∏—Ü–∞ –ê: ')
    for i in matrix_A:
        print(i)
    # –í—ã–≤–æ–¥ –º–∞—Ç—Ä–∏—Ü—ã –í
    print("–ú–∞—Ç—Ä–∏—Ü–∞ B: ")
    for i in matrix_B:
        print(i)
    # –í–≤–æ–¥ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∏–º–µ—é—â–∏—Ö—Å—è
    m, n, p = len(matrix_A), len(matrix_A[0]), len(matrix_B[0])

    # –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã –° (–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã 0, –∞ –∑–∞—Ç–µ–º –ø—Ä–∏–±–∞–≤–ª–µ–Ω–∏–µ [i][j] —ç–ª–µ–º–µ–Ω—Ç–∞)
    matrix_C = [[0 for i in range(p)] for j in range(m)]
    for i in range(m):
        for j in range(p):
            for g in range(n):
                # –°—á–∏—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–ª–æ–∂–µ–Ω–∏—è
                sum_op += 1
                matrix_C[i][j] += matrix_A[i][g] * matrix_B[g][j]

    # –í—ã–≤–æ–¥ –º–∞—Ç—Ä–∏—Ü—ã –°
    print('–ú–∞—Ç—Ä–∏—Ü–∞ –°: ')
    for i in range(m):
        print(matrix_C[i])

    # –ó–∞–º–µ—Ç–∏–º, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–ª–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—ã –° –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞ 1 —Å–ª–æ–∂–µ–Ω–∏–µ –º–µ–Ω—å—à–µ, —á–µ–º —É–º–Ω–æ–∂–µ–Ω–∏–µ
    print(f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —É–º–Ω–æ–∂–µ–Ω–∏—è: {sum_op} "
          f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–ª–æ–∂–µ–Ω–∏—è: {sum_op - (n * n)}")
